/*
 * This Java source file was generated by the Gradle 'init' task.
 */
package CS4488.Capstone.Library.Tools;

import CS4488.Capstone.Library.BackEndSystemInterfaces.HexDataClass;


import static CS4488.Capstone.Library.Tools.HexadecimalConverter.*;

/**
 * Hex4Digit
 *
 * should go from 65535 to -65536
 *
 * @version 1.0
 * @author Traae
 */
public class Hex4digit implements HexDataClass {
    // Instance Variables
    private int hex;

    // Constructors
    public Hex4digit(){
        hex = 0;
    }
    public Hex4digit(char[] value){
        hex = hexToDecimal(value);
    }
    public Hex4digit(int value){
        hex = value;
    }

    // SETTERS
    @Override
    public void setValue(int number) {
        hex = number;
    }
    @Override
    public void setValue(String number) {
        hex = HexadecimalConverter.hexToDecimal(number.toCharArray());
    }
    public void setValue(char[] number) {
        hex = HexadecimalConverter.hexToDecimal(number);
    }
    // Set a single digit, potentially useful, but processing heavy.
    public void setFirst(char first) {
        char[] change = HexadecimalConverter.decimalToHex(hex);  // Convert to Hex.
        change[1] = first;                                      // Change appropriate index.
        hex = HexadecimalConverter.hexToDecimal(change);        // convert back.
    }
    public void setSecond(char second) {
        char[] change = HexadecimalConverter.decimalToHex(hex);
        change[2] = second;
        hex = HexadecimalConverter.hexToDecimal(change);
    }
    public void setThird(char third) {
        char[] change = HexadecimalConverter.decimalToHex(hex);
        change[3] = third;
        hex = HexadecimalConverter.hexToDecimal(change);
    }
    public void setFourth(char fourth) {
        char[] change = HexadecimalConverter.decimalToHex(hex);
        change[4] = fourth;
        hex = HexadecimalConverter.hexToDecimal(change);
    }

    // GETTERS
    public boolean isPositive(){
        return (hex >= 0);
    }
    public char getSign(){
        char result = '-';
        if (this.isPositive()){
            result = '+';
        }
        return result;
    }
    public char getFirst(){
        return HexadecimalConverter.decimalToHex(hex)[1];
    }
    public char getSecond(){
        return HexadecimalConverter.decimalToHex(hex)[2];
    }
    public char getThird(){
        return HexadecimalConverter.decimalToHex(hex)[3];
    }
    public char getFourth(){
        return HexadecimalConverter.decimalToHex(hex)[4];
    }
    @Override
    public int getValue() {
        return hex;
    }

    /**
     * @return Hex characters without the +/-
     */
    @Override
    public char[] getHexChars() {
        String s = new String(HexadecimalConverter.decimalToHex(hex));
        s.replaceAll("[^0-9a-f]", "");
        return s.toCharArray();
    }
    /**
     * @return Hex characters with the +/-
     */
    public char[] getSignedHexChars() {
        return HexadecimalConverter.decimalToHex(hex);
    }

    /**
     * Return the integer sum of the middle digits.
     * For determining a memory space value from inside an instruction, when the memory space is first
     *
     * @return the integer sum of the 2nd and 3rd digit
     */
    @Override
    public int getMiddle2Value() {
        char[] hexChars = HexadecimalConverter.decimalToHex(hex) ;
        int result = HexadecimalConverter.hexValue(hexChars[2])
                + HexadecimalConverter.hexValue(hexChars[3]);
        return result;
    }
    /**
     * Return the integer sum of the middle digits.
     * For determining a memory space value from inside an instruction, when the memory space is LAST
     *
     * @return the integer sum of the 3rd and 4th digit
     */
    @Override
    public int getLast2Value() {
        char[] hexChars = HexadecimalConverter.decimalToHex(hex) ;
        int result = HexadecimalConverter.hexValue(hexChars[3])
                + HexadecimalConverter.hexValue(hexChars[4]);
        return result;
    }

    // TODO These is a forwarding methods to the Converter to avoid breaking the build.
    // TODO finish refactoring and delete this.
    public static char hexChar(int n){
        return HexadecimalConverter.hexChar(n);
    }
    // TODO finish refactoring and delete this.
    public static int hexValue(char n){
        return HexadecimalConverter.hexValue(n);
    }
}